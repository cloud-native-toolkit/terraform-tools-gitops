name: gitops-repo
type: terraform
description: Module to provision and set up a GitOps repository
tags:
  - tools
  - devops
  - gitops
versions:
  - platforms: []
    dependencies:
      - id: cert
        optional: true
        refs:
          - source: github.com/cloud-native-toolkit/terraform-util-sealed-secret-cert
            version: '>= 1.0.0'
    variables:
      - name: host
        type: string
        description: The host for the git repository.
      - name: type
        type: string
        description: The type of the hosted git repository (github or gitlab).
      - name: org
        type: string
        description: The org/group where the git repository exists/will be provisioned.
      - name: repo
        type: string
        description: >-
          The short name of the repository (i.e. the part after the org/group
          name)
      - name: branch
        type: string
        description: >-
          The name of the branch that will be used. If the repo already exists
          (provision=false) then it is assumed this branch already exists as
          well
        default: main
      - name: provision
        type: bool
        description: >-
          Flag indicating that the git repo should be provisioned. If `false`
          then the repo is expected to already exist
        default: true
      - name: initialize
        type: bool
        description: >-
          Flag indicating that the git repo should be initialized. If `false`
          then the repo is expected to already have been initialized
        default: false
      - name: username
        type: string
        description: The username of the user with access to the repository
      - name: token
        type: string
        description: The personal access token used to access the repository
        sensitive: true
      - name: public
        type: bool
        description: Flag indicating that the repo should be public or private
        default: false
      - name: gitops_namespace
        type: string
        description: The namespace where ArgoCD is running in the cluster
        default: openshift-gitops
      - name: server_name
        type: string
        description: >-
          The name of the cluster that will be configured via gitops. This is
          used to separate the config by cluster
        default: default
      - name: sealed_secrets_cert
        type: string
        description: The certificate/public key used to encrypt the sealed secrets
        default: ''
        moduleRef:
          id: cert
          output: cert
    version: v1.14.5
    outputs:
      - name: config_repo
        description: The repo that contains the argocd configuration
      - name: config_repo_url
        description: The repo that contains the argocd configuration
      - name: config_username
        description: The username for the config repo
      - name: config_token
        description: The token for the config repo
        sensitive: true
      - name: config_paths
        description: The paths in the config repo
      - name: config_projects
        description: The ArgoCD projects for the different layers of the repo
      - name: bootstrap_path
        description: The path to the bootstrap configuration
      - name: bootstrap_branch
        description: The branch in the gitrepo containing the bootstrap configuration
      - name: application_repo
        description: The repo that contains the application configuration
      - name: application_repo_url
        description: The repo that contains the application configuration
      - name: application_username
        description: The username for the application repo
      - name: application_token
        description: The token for the application repo
        sensitive: true
      - name: application_paths
        description: The paths in the application repo
      - name: gitops_config
        description: Config information regarding the gitops repo structure
      - name: git_credentials
        description: The credentials for the gitops repo(s)
        sensitive: true
      - name: server_name
        description: The name of the cluster that will be configured for gitops
      - name: sealed_secrets_cert
        description: The certificate used to encrypt sealed secrets
  - platforms: []
    dependencies:
      - id: cert
        optional: true
        refs:
          - source: github.com/cloud-native-toolkit/terraform-util-sealed-secret-cert
            version: '>= 1.0.0'
    variables:
      - name: host
        type: string
        description: The host for the git repository.
      - name: type
        type: string
        description: The type of the hosted git repository (github or gitlab).
      - name: org
        type: string
        description: The org/group where the git repository exists/will be provisioned.
      - name: repo
        type: string
        description: >-
          The short name of the repository (i.e. the part after the org/group
          name)
      - name: branch
        type: string
        description: >-
          The name of the branch that will be used. If the repo already exists
          (provision=false) then it is assumed this branch already exists as
          well
        default: main
      - name: provision
        type: bool
        description: >-
          Flag indicating that the git repo should be provisioned. If `false`
          then the repo is expected to already exist
        default: true
      - name: initialize
        type: bool
        description: >-
          Flag indicating that the git repo should be initialized. If `false`
          then the repo is expected to already have been initialized
        default: false
      - name: username
        type: string
        description: The username of the user with access to the repository
      - name: token
        type: string
        description: The personal access token used to access the repository
        sensitive: true
      - name: public
        type: bool
        description: Flag indicating that the repo should be public or private
        default: false
      - name: gitops_namespace
        type: string
        description: The namespace where ArgoCD is running in the cluster
        default: openshift-gitops
      - name: server_name
        type: string
        description: >-
          The name of the cluster that will be configured via gitops. This is
          used to separate the config by cluster
        default: default
      - name: sealed_secrets_cert
        type: string
        description: The certificate/public key used to encrypt the sealed secrets
        default: ''
        moduleRef:
          id: cert
          output: cert
    version: v1.14.4
    outputs:
      - name: config_repo
        description: The repo that contains the argocd configuration
      - name: config_repo_url
        description: The repo that contains the argocd configuration
      - name: config_username
        description: The username for the config repo
      - name: config_token
        description: The token for the config repo
        sensitive: true
      - name: config_paths
        description: The paths in the config repo
      - name: config_projects
        description: The ArgoCD projects for the different layers of the repo
      - name: bootstrap_path
        description: The path to the bootstrap configuration
      - name: bootstrap_branch
        description: The branch in the gitrepo containing the bootstrap configuration
      - name: application_repo
        description: The repo that contains the application configuration
      - name: application_repo_url
        description: The repo that contains the application configuration
      - name: application_username
        description: The username for the application repo
      - name: application_token
        description: The token for the application repo
        sensitive: true
      - name: application_paths
        description: The paths in the application repo
      - name: gitops_config
        description: Config information regarding the gitops repo structure
      - name: git_credentials
        description: The credentials for the gitops repo(s)
        sensitive: true
      - name: server_name
        description: The name of the cluster that will be configured for gitops
      - name: sealed_secrets_cert
        description: The certificate used to encrypt sealed secrets
  - platforms: []
    dependencies:
      - id: cert
        optional: true
        refs:
          - source: github.com/cloud-native-toolkit/terraform-util-sealed-secret-cert
            version: '>= 1.0.0'
    variables:
      - name: host
        type: string
        description: The host for the git repository.
      - name: type
        type: string
        description: The type of the hosted git repository (github or gitlab).
      - name: org
        type: string
        description: The org/group where the git repository exists/will be provisioned.
      - name: repo
        type: string
        description: >-
          The short name of the repository (i.e. the part after the org/group
          name)
      - name: branch
        type: string
        description: >-
          The name of the branch that will be used. If the repo already exists
          (provision=false) then it is assumed this branch already exists as
          well
        default: main
      - name: provision
        type: bool
        description: >-
          Flag indicating that the git repo should be provisioned. If `false`
          then the repo is expected to already exist
        default: true
      - name: initialize
        type: bool
        description: >-
          Flag indicating that the git repo should be initialized. If `false`
          then the repo is expected to already have been initialized
        default: false
      - name: username
        type: string
        description: The username of the user with access to the repository
      - name: token
        type: string
        description: The personal access token used to access the repository
        sensitive: true
      - name: public
        type: bool
        description: Flag indicating that the repo should be public or private
        default: false
      - name: gitops_namespace
        type: string
        description: The namespace where ArgoCD is running in the cluster
        default: openshift-gitops
      - name: server_name
        type: string
        description: >-
          The name of the cluster that will be configured via gitops. This is
          used to separate the config by cluster
        default: default
      - name: sealed_secrets_cert
        type: string
        description: The certificate/public key used to encrypt the sealed secrets
        default: ''
        moduleRef:
          id: cert
          output: cert
    version: v1.14.3
    outputs:
      - name: config_repo
        description: The repo that contains the argocd configuration
      - name: config_repo_url
        description: The repo that contains the argocd configuration
      - name: config_username
        description: The username for the config repo
      - name: config_token
        description: The token for the config repo
        sensitive: true
      - name: config_paths
        description: The paths in the config repo
      - name: config_projects
        description: The ArgoCD projects for the different layers of the repo
      - name: bootstrap_path
        description: The path to the bootstrap configuration
      - name: bootstrap_branch
        description: The branch in the gitrepo containing the bootstrap configuration
      - name: application_repo
        description: The repo that contains the application configuration
      - name: application_repo_url
        description: The repo that contains the application configuration
      - name: application_username
        description: The username for the application repo
      - name: application_token
        description: The token for the application repo
        sensitive: true
      - name: application_paths
        description: The paths in the application repo
      - name: gitops_config
        description: Config information regarding the gitops repo structure
      - name: git_credentials
        description: The credentials for the gitops repo(s)
        sensitive: true
      - name: server_name
        description: The name of the cluster that will be configured for gitops
      - name: sealed_secrets_cert
        description: The certificate used to encrypt sealed secrets
  - platforms: []
    dependencies:
      - id: cert
        optional: true
        refs:
          - source: github.com/cloud-native-toolkit/terraform-util-sealed-secret-cert
            version: '>= 1.0.0'
    variables:
      - name: host
        type: string
        description: The host for the git repository.
      - name: type
        type: string
        description: The type of the hosted git repository (github or gitlab).
      - name: org
        type: string
        description: The org/group where the git repository exists/will be provisioned.
      - name: repo
        type: string
        description: >-
          The short name of the repository (i.e. the part after the org/group
          name)
      - name: branch
        type: string
        description: >-
          The name of the branch that will be used. If the repo already exists
          (provision=false) then it is assumed this branch already exists as
          well
        default: main
      - name: provision
        type: bool
        description: >-
          Flag indicating that the git repo should be provisioned. If `false`
          then the repo is expected to already exist
        default: true
      - name: initialize
        type: bool
        description: >-
          Flag indicating that the git repo should be initialized. If `false`
          then the repo is expected to already have been initialized
        default: false
      - name: username
        type: string
        description: The username of the user with access to the repository
      - name: token
        type: string
        description: The personal access token used to access the repository
        sensitive: true
      - name: public
        type: bool
        description: Flag indicating that the repo should be public or private
        default: false
      - name: gitops_namespace
        type: string
        description: The namespace where ArgoCD is running in the cluster
        default: openshift-gitops
      - name: server_name
        type: string
        description: >-
          The name of the cluster that will be configured via gitops. This is
          used to separate the config by cluster
        default: default
      - name: sealed_secrets_cert
        type: string
        description: The certificate/public key used to encrypt the sealed secrets
        default: ''
        moduleRef:
          id: cert
          output: cert
    version: v1.14.2
    outputs:
      - name: config_repo
        description: The repo that contains the argocd configuration
      - name: config_repo_url
        description: The repo that contains the argocd configuration
      - name: config_username
        description: The username for the config repo
      - name: config_token
        description: The token for the config repo
        sensitive: true
      - name: config_paths
        description: The paths in the config repo
      - name: config_projects
        description: The ArgoCD projects for the different layers of the repo
      - name: bootstrap_path
        description: The path to the bootstrap configuration
      - name: bootstrap_branch
        description: The branch in the gitrepo containing the bootstrap configuration
      - name: application_repo
        description: The repo that contains the application configuration
      - name: application_repo_url
        description: The repo that contains the application configuration
      - name: application_username
        description: The username for the application repo
      - name: application_token
        description: The token for the application repo
        sensitive: true
      - name: application_paths
        description: The paths in the application repo
      - name: gitops_config
        description: Config information regarding the gitops repo structure
      - name: git_credentials
        description: The credentials for the gitops repo(s)
        sensitive: true
      - name: server_name
        description: The name of the cluster that will be configured for gitops
      - name: sealed_secrets_cert
        description: The certificate used to encrypt sealed secrets
  - platforms: []
    dependencies:
      - id: cert
        optional: true
        refs:
          - source: github.com/cloud-native-toolkit/terraform-util-sealed-secret-cert
            version: '>= 1.0.0'
    variables:
      - name: host
        type: string
        description: The host for the git repository.
      - name: type
        type: string
        description: The type of the hosted git repository (github or gitlab).
      - name: org
        type: string
        description: The org/group where the git repository exists/will be provisioned.
      - name: repo
        type: string
        description: >-
          The short name of the repository (i.e. the part after the org/group
          name)
      - name: branch
        type: string
        description: >-
          The name of the branch that will be used. If the repo already exists
          (provision=false) then it is assumed this branch already exists as
          well
        default: main
      - name: provision
        type: bool
        description: >-
          Flag indicating that the git repo should be provisioned. If `false`
          then the repo is expected to already exist
        default: true
      - name: initialize
        type: bool
        description: >-
          Flag indicating that the git repo should be initialized. If `false`
          then the repo is expected to already have been initialized
        default: false
      - name: username
        type: string
        description: The username of the user with access to the repository
      - name: token
        type: string
        description: The personal access token used to access the repository
        sensitive: true
      - name: public
        type: bool
        description: Flag indicating that the repo should be public or private
        default: false
      - name: gitops_namespace
        type: string
        description: The namespace where ArgoCD is running in the cluster
        default: openshift-gitops
      - name: server_name
        type: string
        description: >-
          The name of the cluster that will be configured via gitops. This is
          used to separate the config by cluster
        default: default
      - name: sealed_secrets_cert
        type: string
        description: The certificate/public key used to encrypt the sealed secrets
        default: ''
        moduleRef:
          id: cert
          output: cert
    version: v1.14.1
    outputs:
      - name: config_repo
        description: The repo that contains the argocd configuration
      - name: config_repo_url
        description: The repo that contains the argocd configuration
      - name: config_username
        description: The username for the config repo
      - name: config_token
        description: The token for the config repo
        sensitive: true
      - name: config_paths
        description: The paths in the config repo
      - name: config_projects
        description: The ArgoCD projects for the different layers of the repo
      - name: bootstrap_path
        description: The path to the bootstrap configuration
      - name: bootstrap_branch
        description: The branch in the gitrepo containing the bootstrap configuration
      - name: application_repo
        description: The repo that contains the application configuration
      - name: application_repo_url
        description: The repo that contains the application configuration
      - name: application_username
        description: The username for the application repo
      - name: application_token
        description: The token for the application repo
        sensitive: true
      - name: application_paths
        description: The paths in the application repo
      - name: gitops_config
        description: Config information regarding the gitops repo structure
      - name: git_credentials
        description: The credentials for the gitops repo(s)
        sensitive: true
      - name: server_name
        description: The name of the cluster that will be configured for gitops
      - name: sealed_secrets_cert
        description: The certificate used to encrypt sealed secrets
id: github.com/cloud-native-toolkit/terraform-tools-gitops
